I"*<h2 id="前端面试题-说一下cdn的原理"><a href="https://www.cnblogs.com/echolun/p/10287616.html">【前端面试题】 说一下cdn的原理</a></h2>

<h1 id="面试题概述">面试题概述</h1>

<p>面试中聊到静态资源上传cdn之后，面试官一半都会问一个问题：说一下cdn的原理。</p>

<p>最近也被问到了，整理一下。</p>

<h1 id="解答">解答</h1>

<p>资源上传cdn之后，当用户访问cdn的资源地址之后会经历下面的步骤：</p>

<p>首先经过本地的dns解析，请求cname指向的那台cdn专用的dns服务器。</p>

<p>dns服务器返回全局负载均衡的服务器ip给用户</p>

<p>用户请求全局负载均衡服务器，服务器根据ip返回所在区域的负载均衡服务器ip给用户</p>

<p>用户请求区域负载均衡服务器，负载均衡服务器根据用户ip选择距离近的，并且存在用户所需内容的，负载比较合适的一台缓存服务器ip给用户。当没有对应内容的时候，会去上一级缓存服务器去找，直到找到资源所在的源站服务器，并且缓存在缓存服务器中。用户下一次在请求该资源，就可以就近拿缓存了。</p>

<p>注意：因为cdn的负载均衡和就近选择缓存都是根据用户的ip来的，服务器只能拿到local dns的ip，也就是网络设置中设置的dns ip，如果这个设置的不合理，那么可能起不到加速的效果。可能就近找到的缓存服务器实际离得很远。</p>

<h1 id="总结">总结</h1>

<p>cdn的原理主要答出负载均衡和缓存再就是dns解析这三部分就行了吧，通过dns解析到全局负载均衡服务器，然后再到区域的负载均衡，之后根据一些条件来找合适的缓存服务器，如果第一次访问就从源站拿过来缓存。需要注意的是一切都是根据请求的ip来的，如果ip不合理，那么可能起不到加速效果。缓存和负载均衡的思想在减轻服务器压力方面其实是很常见的。</p>

<p><a href="https://juejin.im/post/6844904197792628749">Link</a></p>
:ET